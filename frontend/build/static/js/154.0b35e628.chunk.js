"use strict";(self.webpackChunkpersonal_blog=self.webpackChunkpersonal_blog||[]).push([[154],{9894:(e,t,a)=>{a.d(t,{A:()=>r});a(5043);var s=a(579);const r=()=>(0,s.jsx)("footer",{className:"footer",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"col-md-4 d-flex align-items-center",children:[(0,s.jsx)("a",{href:"/",className:"footer-logo",children:(0,s.jsx)("svg",{className:"bi",width:"30",height:"24",children:(0,s.jsx)("use",{xlinkHref:"#bootstrap"})})}),(0,s.jsxs)("span",{className:"footer-text",children:["\xa9 ",(new Date).getFullYear()," PersBlog"]})]})})})},4154:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var s=a(5043),r=a(6213),n=a(9424),i=a(4496),l=a(4194),o=a(1906),c=a(1637),d=a(8903),h=a(2110),x=a(6494),m=a(9894),p=a(3216),g=a(579);const u=e=>{let{isAdmin:t}=e;const[a,u]=(0,s.useState)([]),[j,y]=(0,s.useState)(!0),[A,v]=(0,s.useState)(null),f=(0,p.Zp)(),b={id:"default",title:"Temporary Post",content:"Due to an error fetching the posts, you are only seeing this default post. Please try again later.",posted_at:(new Date).toISOString(),author:"PersBlog"};(0,s.useEffect)((()=>{(async()=>{try{const e=await r.A.get("http://localhost:4000/api/posts");u(e.data)}catch(A){console.error("Error fetching posts:",A),v("Failed to load posts. Please try again later."),u([b])}finally{y(!1)}})()}),[]);const N=e=>{f(`/post-view/${e}`)};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)(n.A,{className:"container-title",children:[(0,g.jsx)(i.A,{variant:"h4",align:"center",gutterBottom:!0,children:"Explore the Latest Posts"}),(0,g.jsx)(i.A,{variant:"h6",align:"center",gutterBottom:!0,children:"Welcome to the blog! Here are my thoughts and posts."}),A&&(0,g.jsx)(l.A,{severity:"error",sx:{textAlign:"center"},children:A}),t&&(0,g.jsx)("div",{style:{textAlign:"center",marginBottom:"16px"},children:(0,g.jsx)(o.A,{variant:"contained",className:"create-post-btn",onClick:()=>{t?f("/create-post"):alert("Only authorized users can create a post.")},children:"Create New Post"})}),j?(0,g.jsx)("div",{style:{textAlign:"center",margin:"40px 0"},children:(0,g.jsx)(c.A,{})}):(0,g.jsx)(d.Ay,{container:!0,spacing:3,children:a.length>0?a.map((e=>{return(0,g.jsx)(d.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,g.jsxs)(h.A,{className:"card-body-bg",children:[(0,g.jsx)("div",{className:"card-top-title",children:(0,g.jsx)(i.A,{variant:"h5",align:"center",onClick:()=>N(e.id),className:"card-title",children:e.title})}),(0,g.jsxs)(x.A,{className:"card-content-limited",children:[(0,g.jsx)(i.A,{variant:"body2",color:"textSecondary",children:e.content?e.content.substring(0,100)+"...":"No content available"}),(0,g.jsx)(i.A,{variant:"body2",color:"primary",onClick:()=>N(e.id),className:"card-read-more",children:"Read More"}),(0,g.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0"},children:t&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.A,{size:"small",className:"btn-edit",onClick:()=>{return t=e.id,void f(`/edit-post/${t}`);var t},variant:"outlined",children:"Edit"}),(0,g.jsx)(o.A,{size:"small",className:"btn-delete",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this post?"))try{u(a.map((t=>t.id===e?{...t,deleting:!0}:t))),await r.A.delete(`http://localhost:4000/api/posts/${e}`),u(a.filter((t=>t.id!==e)))}catch(A){console.error("Error deleting post:",A),v("Failed to delete the post. Please try again.")}})(e.id),disabled:e.deleting,variant:"outlined",children:e.deleting?"Deleting...":"Delete"})]})}),(0,g.jsx)(i.A,{variant:"caption",color:"textSecondary",className:"post-date",children:(s=e.posted_at,new Date(s).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}))}),(0,g.jsx)("br",{}),(0,g.jsxs)(i.A,{variant:"caption",color:"textSecondary",className:"post-author",children:["Author: ",e.author||"Ashik Ibrahim"]})]})]})},e.id);var s})):(0,g.jsx)(l.A,{severity:"info",sx:{textAlign:"center"},children:"No posts available"})})]}),(0,g.jsx)(m.A,{})]})}}}]);
//# sourceMappingURL=154.0b35e628.chunk.js.map